<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>app-datepicker tests</title>

    <script src="https://cdn.jsdelivr.net/npm/@babel/polyfill@7.2.5/dist/polyfill.min.js"></script>
    <script src="../../node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="../../node_modules/chai/chai.js"></script>
    <script src="../../node_modules/mocha/mocha.js"></script>
    <script src="../../node_modules/wct-mocha/wct-mocha.js"></script>

    <script type="module">
      const isES6ClassSupported = () => {
        'use strict';
        try { eval('class Foo {}'); }
        catch (e) { return false; }
        return true;
      };

      if (!isES6ClassSupported()) {
        const cea = document.createElement('script');
        cea.src =
          '/node_modules/@webcomponents/webcomponentsjs/custom-elements-es5-adapter.js';
        cea.onload = () => console.info('⚒ CE ES5 adapter loaded');
        cea.onerror = console.error;
        document.head.appendChild(cea);
      }

      if (!(Element.prototype.animate)) {
        const wa = document.createElement('script');
        wa.src =
          'https://cdn.jsdelivr.net/npm/web-animations-js@latest/web-animations-next-lite.min.js';
        wa.onload = () => console.info('⚒ Web Animations Next lite loaded');
        wa.onerror = console.error;
        document.head.appendChild(wa);
      }

      if (!window.Intl) {
        const wa = document.createElement('script');
        /** FIXME: Pin package version due to https://github.com/andyearnshaw/Intl.js/issues/256 */
        wa.src = 'https://unpkg.com/intl@1.2.4/dist/Intl.complete.js';
        wa.onload = () => console.info('🌐 Intl polyfill loaded');
        wa.onerror = console.error;
        document.head.appendChild(wa);
      }
    </script>
  </head>

  <body>
    <script type="module">
      import '../../dist/app-datepicker.js';
      import '../../dist/app-datepicker-dialog.js';

      import '../../dist/test/app-datepicker/app-datepicker.spec.js';
      // import '../../dist/test/app-datepicker-dialog/app-datepicker-dialog.spec.js';
    </script>
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>app-datepicker tests</title>

    <!-- <script src="https://polyfill.io/v3/polyfill.min.js?flags=gated&rum=true&features=default%2CArray.from%2CArray.prototype.find%2Cfetch%2CArray.prototype.keys"></script> -->
    <script src="../../node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="../../node_modules/chai/chai.js"></script>
    <script src="../../node_modules/mocha/mocha.js"></script>
    <script src="../../node_modules/wct-mocha/wct-mocha.js"></script>

    <script>
      if (!(Element.prototype.animate)) {
        const wa = document.createElement('script');
        wa.src =
          'https://cdn.jsdelivr.net/npm/web-animations-js@latest/web-animations-next-lite.min.js';
        wa.onload = () => console.info('⚒ Web Animations Next lite loaded');
        wa.onerror = console.error;
        document.head.appendChild(wa);
      }

      if (!window.Intl) {
        const wa = document.createElement('script');
        /** FIXME: Pin package version due to https://github.com/andyearnshaw/Intl.js/issues/256 */
        // wa.src = 'https://cdn.jsdelivr.net/npm/intl@latest/dist/Intl.complete.js';
        wa.src = 'https://unpkg.com/intl@1.2.4/dist/Intl.complete.js';
        wa.onload = () => console.info('🌐 Intl.complete loaded');
        wa.onerror = console.error;
        document.head.appendChild(wa);
      }

      if ([].find == null) {
        Object.defineProperty(Array.prototype, 'find', {
          value: function arrayFind(cb) {
            return Array.isArray(this) && this.length > 0
              ? this.filter(cb)[0]
              : null;
          },
        });
      }

      if ([].findIndex == null) {
        Object.defineProperty(Array.prototype, 'findIndex', {
          value: function arrayFindIndex(cb) {
            if (Array.isArray(this) && this.length > 0) {
              for (var i = 0, len = this.length; i < len; i += 1) {
                if (cb(this[i], i, this)) return i;
              }
            }

            return -1;
          },
        });
      }
    </script>
  </head>

  <body>
    <script type="module" src="../../dist/test/app-datepicker.spec.js"></script>
  </body>
</html>
